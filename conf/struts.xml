<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
    <constant name="struts.devMode" value="false"/>
    <constant name="struts.configuration.xml.reload" value="false"/>
    <constant name="struts.custom.i18n.resources" value="messageResource"/>
    <constant name="struts.i18n.encoding" value="UTF-8"/>
    <constant name="struts.action.extension" value="jspx,action,do,jspa, ,"/>
    <constant name="struts.serve.static" value="true"/>
    <constant name="struts.serve.static.browserCache" value="false"/>
    <constant name="struts.ui.theme" value="simple"/>
    <constant name="struts.enable.SlashesInActionNames" value="true"/>
    <bean type="org.apache.struts2.dispatcher.multipart.MultiPartRequest" name="merc" class="edu.monash.merc.struts2.multipart.MonitoredMultiPartRequest" scope="default"/>
    <constant name="struts.multipart.handler" value="merc"/>
    <constant name="struts.multipart.maxSize" value="2048000000"/>

    <package name="core.merc" extends="struts-default">
        <result-types>
            <result-type name="freemarker" class="org.apache.struts2.views.freemarker.FreemarkerResult" default="true"/>
            <result-type name="json" class="org.apache.struts2.json.JSONResult"/>
            <result-type name="rawtext" class="edu.monash.merc.struts2.dispatcher.RawTextResult"/>
        </result-types>

        <interceptors>
            <interceptor name="authenInterceptor"
                         class="edu.monash.merc.struts2.intercepter.AuthenticationInterceptor"/>
            <interceptor-stack name="noneAuthStack">
                <interceptor-ref name="defaultStack"/>
            </interceptor-stack>
            <interceptor-stack name="authenStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="authenInterceptor"/>
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="noneAuthStack"/>

        <global-results>

            <!-- show login -->
            <result name="login" type="chain">
                <param name="actionName">showLogin</param>
                <param name="namespace">/user</param>
            </result>

            <result name="file_not_found" type="freemarker">/web/404.html</result>
            <result name="invocation_target_exception" type="freemarker">/web/global/invocation_target_exception.ftl
            </result>

            <!-- redirect to view exp from public to logged in -->
            <result name="redirectexp" type="redirectAction">
                <param name="namespace">${redNamespace}</param>
                <param name="actionName">${redActionName}</param>
                <param name="experiment.id">${experiment.id}</param>
            </result>

            <!-- redirect to view all exp from public to logged in -->
            <result name="redirectallexp" type="redirectAction">
                <param name="namespace">${redNamespace}</param>
                <param name="actionName">${redActionName}</param>
            </result>

            <!-- redirect to view dataset from public to loggedin -->
            <result name="redirectds" type="redirectAction">
                <param name="namespace">${redNamespace}</param>
                <param name="actionName">${redActionName}</param>
                <param name="experiment.id">${experiment.id}</param>
                <param name="dataset.id">${dataset.id}</param>
            </result>

            <!-- redirect to view all datasets from public to logged in -->
            <result name="redirectallds" type="redirectAction">
                <param name="namespace">${redNamespace}</param>
                <param name="actionName">${redActionName}</param>
                <param name="experiment.id">${experiment.id}</param>
            </result>

        </global-results>

        <global-exception-mappings>
            <exception-mapping result="file_not_found" exception="java.io.FileNotFoundException"/>
            <exception-mapping result="invocation_target_exception"
                               exception="java.lang.reflect.InvocationTargetException"/>
        </global-exception-mappings>

        <action name="*">
            <result type="freemarker">/web/{1}.ftl</result>
        </action>
        <action name="home" class="interferome.homeAction" method="home">
            <result type="freemarker">/web/home.ftl</result>
        </action>
    </package>

    <!-- User actions -->
    <package name="core.user" extends="core.merc" namespace="/user">
        <default-interceptor-ref name="noneAuthStack"/>

        <action name="*">
            <result type="freemarker">/web/user/{1}.ftl</result>
        </action>

        <action name="registerUser" class="user.userAction" method="register">
            <result name="input">/web/user/user_register.ftl</result>
            <result name="error">/web/user/user_register.ftl</result>
            <result name="success">/web/user/user_action_finished.ftl</result>
        </action>

        <action name="registerLdapUser" class="user.userAction" method="registerLdapUser">
            <result name="input">/web/user/ldap_user_register.ftl</result>
            <result name="error">/web/user/ldap_user_register.ftl</result>
            <result name="success">/web/user/user_action_finished.ftl</result>
        </action>

        <action name="showLogin" class="user.userAction" method="showLogin">
            <result name="success">/web/user/user_login.ftl</result>
            <result name="error">/web/user/user_login.ftl</result>
        </action>

        <action name="userLogin" class="user.userAction" method="login">
            <result name="input">/web/user/user_login.ftl</result>
            <result name="error">/web/user/user_login.ftl</result>
            <result name="success">/web/user/login_success.ftl</result>
        </action>

        <action name="userLogout" class="user.userAction" method="logout">
            <result>/web/home.ftl</result>
        </action>

        <action name="viewAvatar" class="user.viewAvatarAction" method="viewAvatar">
            <result name="success" type="stream">
                <param name="contentType">image/jpeg</param>
                <param name="inputName">imageStream</param>
                <param name="allowCaching">false</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>

        <action name="forgotPasswd" class="user.passwordAction" method="forgotPassword">
            <result name="input">/web/user/user_request_resetpwd.ftl</result>
            <result name="error">/web/user/user_request_resetpwd.ftl</result>
            <result name="success">/web/user/user_action_finished.ftl</result>
        </action>

        <action name="verifyPwdReset" class="user.passwordAction" method="verifyPasswdReset">
            <result name="input">/web/user/reset_pwd_error_page.ftl</result>
            <result name="error">/web/user/reset_pwd_error_page.ftl</result>
            <result name="success">/web/user/reset_pwd_page.ftl</result>
        </action>

        <action name="resetPassword" class="user.passwordAction" method="resetPassword">
            <result name="input">/web/user/reset_pwd_page.ftl</result>
            <result name="error">/web/user/reset_pwd_page.ftl</result>
            <result name="success">/web/user/user_action_finished.ftl</result>
        </action>

    </package>

    <package name="core.manage" extends="core.merc" namespace="/manage">
        <default-interceptor-ref name="authenStack"/>
        <action name="*">
            <result type="freemarker">/web/manage/{1}.ftl</result>
        </action>

        <!-- show the user home -->
        <action name="userHome" class="manage.userHomeAction" method="userHome">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/manage/user_home.ftl</result>
        </action>

        <!-- show user profile for updating -->
        <action name="showProfileUpdate" class="manage.userHomeAction" method="showProfileUpdate">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/manage/edit_profile.ftl</result>
        </action>

        <!-- update the user profile -->
        <action name="updateProfile" class="manage.userHomeAction" method="updateProfile">
            <result name="input">/web/manage/edit_profile.ftl</result>
            <result name="error">/web/manage/edit_profile.ftl</result>
            <result name="success">/web/manage/profile_details.ftl</result>
        </action>

        <!-- show user profile -->
        <action name="showProfile" class="manage.userHomeAction" method="showProfile">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/manage/profile_details.ftl</result>
        </action>

        <!-- show avatar uploading -->
        <action name="showAvatarUpload" class="manage.imageCropAction" method="showAvatarUpload">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/jcrop/image_upload.ftl</result>
        </action>

        <!-- upload the user avatar -->
        <action name="uploadAvatar" class="manage.imageCropAction" method="uploadAvatar">
            <result name="input">/web/jcrop/image_upload.ftl</result>
            <result name="error">/web/jcrop/image_upload.ftl</result>
            <result name="success">/web/jcrop/image_crop.ftl</result>
        </action>

        <!-- save the user avatar -->
        <action name="saveAvatar" class="manage.imageCropAction" method="saveAvatar">
            <result name="error">/web/jcrop/image_crop.ftl</result>
            <result name="success">/web/jcrop/image_crop.ftl</result>
        </action>

        <!-- show user chanage password page -->
        <action name="showChangePwd" class="manage.changePasswdAction" method="showChangePwd">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/manage/change_passwd.ftl</result>
        </action>

        <!-- change user password -->
        <action name="changePassword" class="manage.changePasswdAction" method="changePassword">
            <result name="input">/web/manage/change_passwd.ftl</result>
            <result name="error">/web/manage/change_passwd.ftl</result>
            <result name="success">/web/manage/manage_action_finished.ftl</result>
        </action>

        <!-- get user all events -->
        <action name="getUserEvents" class="manage.auditEventAction" method="getUserEvents">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/manage/user_events.ftl</result>
        </action>

        <!-- delete the user event -->
        <action name="deleteUserEvent" class="manage.auditEventAction" method="deleteEvent">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/manage/user_events.ftl</result>
        </action>

    </package>

    <package name="core.admin" extends="core.merc" namespace="/admin">
        <default-interceptor-ref name="authenStack"/>

        <action name="*">
            <result type="freemarker">/web/admin/{1}.ftl</result>
        </action>

        <!-- verify the user registration -->
        <action name="verifyAccount" class="admin.adminAction" method="verifyActivationLink">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/admin/activate_user_account.ftl</result>
        </action>

        <!-- activate the user registration -->
        <action name="activateUserAccount" class="admin.adminAction" method="activateUserAccount">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/admin/admin_action_finished.ftl</result>
        </action>

        <!-- reject the user registration -->
        <action name="rejectUserAccount" class="admin.adminAction" method="rejectUserAccount">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/admin/admin_action_finished.ftl</result>
        </action>

        <!-- list all registered users -->
        <action name="listAllUsers" class="admin.listUsersAction" method="listUsers">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/admin/list_users.ftl</result>
        </action>
        <!-- show user details -->
        <action name="showUserDetails" class="admin.manageUserAction" method="showUserDetails">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/admin/user_details.ftl</result>
        </action>

        <!-- manage user -->
        <action name="manageUser" class="admin.manageUserAction" method="manageUser">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/admin/user_details.ftl</result>
        </action>

    </package>

    <package name="core.data" extends="core.merc" namespace="/data">
        <default-interceptor-ref name="authenStack"/>
        <action name="*">
            <result type="freemarker">/web/data/{1}.ftl</result>
        </action>
        <!-- list my experiments for a logged in user -->
        <action name="listMyExperiments" class="data.listExperimentsAction" method="listMyExperiments">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/list_experiments.ftl</result>
        </action>

        <!-- list all experiments for a logged in user -->
        <action name="listExperiments" class="data.listExperimentsAction" method="listExperiments">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/list_experiments.ftl</result>
        </action>

        <!-- view my experiments for a logged experiment owner -->
        <action name="viewMyExperiment" class="data.viewExpDetailsAction" method="viewMyExp">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/exp_details.ftl</result>
        </action>

        <!-- view experiments for a logged in user -->
        <action name="viewExperiment" class="data.viewExpDetailsAction" method="viewExp">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/exp_details.ftl</result>
        </action>

        <!-- show Import Exp -->
        <action name="showImportExp" class="data.importExpAction" method="showImportExp">
            <result name="input">/web/data/import_exp.ftl</result>
            <result name="error">/web/data/import_exp.ftl</result>
            <result name="success">/web/data/import_exp.ftl</result>
        </action>

        <!-- import experiment -->
        <action name="importExp" class="data.importExpAction" method="importExp">
            <result name="input">/web/data/import_exp.ftl</result>
            <result name="error">/web/data/import_exp.ftl</result>
            <result name="success">/web/data/exp_details.ftl</result>
        </action>

        <!-- show edit experiment -->
        <action name="showEditExp" class="data.editExpAction" method="showEditExp">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/edit_experiment.ftl</result>
        </action>

        <!-- edit experiment -->
        <action name="editExp" class="data.editExpAction" method="editExp">
            <result name="input">/web/data/edit_experiment.ftl</result>
            <result name="error">/web/data/edit_experiment.ftl</result>
            <result name="success">/web/data/exp_details.ftl</result>
        </action>

        <!-- delete my experiment -->
        <action name="deleteMyExp" class="data.deleteExpAction" method="deleteMyExp">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/delete_exp_finished.ftl</result>
        </action>

        <!-- delete experiment -->
        <action name="deleteExp" class="data.deleteExpAction" method="deleteExp">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/delete_exp_finished.ftl</result>
        </action>

        <!-- show approve experiment -->
        <action name="showApproveExp" class="data.approveExpAction" method="showApproveExp">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/approve_exp.ftl</result>
        </action>

        <!-- show approve experiment -->
        <action name="approveExp" class="data.approveExpAction" method="approveExp">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/app_exp_com.ftl</result>
        </action>

        <!-- show the metadata registration -->
        <action name="showMdReg" class="data.metadataRegAction" method="showMdReg">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/md/md_exp_reg.ftl</result>
        </action>

        <!-- metadata registration preview -->
        <action name="previewMdReg" class="data.metadataRegAction" method="previewMdReg">
            <result name="input">/web/md/md_exp_reg.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/md/md_reg_preview.ftl</result>
        </action>

        <!-- metadata registration -->
        <action name="mdReg" class="data.metadataRegAction" method="mdReg">
            <result name="input">/web/md/md_reg_preview.ftl</result>
            <result name="error">/web/md/action_error.ftl</result>
            <result name="success">/web/md/md_reg_finished.ftl</result>
        </action>

        <!-- show adding party options -->
        <action name="addPartyOptions" class="data.metadataRegAction" method="addPartyOptions">
            <result name="error">/web/md/party_error.ftl</result>
            <result name="success">/web/md/party_options.ftl</result>
        </action>

        <!-- selected adding party type -->
        <action name="selectPartyType" class="data.metadataRegAction" method="selectPartyType">
            <result name="input">/web/md/party_options.ftl</result>
            <result name="error">/web/md/party_error.ftl</result>
            <result name="success">/web/md/add_party.ftl</result>
        </action>

        <!-- add a party from research master -->
        <action name="addRMParty" class="data.metadataRegAction" method="addRMParty">
            <result name="input">/web/md/add_party.ftl</result>
            <result name="error">/web/md/add_party.ftl</result>
            <result name="success">/web/md/add_party_success.ftl</result>
        </action>

        <!-- add an user-defined party -->
        <action name="addUDParty" class="data.metadataRegAction" method="addUDParty">
            <result name="input">/web/md/add_party.ftl</result>
            <result name="error">/web/md/party_error.ftl</result>
            <result name="success">/web/md/add_party_success.ftl</result>
        </action>

        <!-- collection righst or license options -->
        <action name="licenceOptions" class="data.licenceAction" method="showLicenceOpts">
            <result name="input">/web/md/licence_error.ftl</result>
            <result name="error">/web/md/licence_error.ftl</result>
            <result name="success">/web/md/licence_options.ftl</result>
        </action>

        <!-- select rights option -->
        <action name="selectLicence" class="data.licenceAction" method="selectLicence">
            <result name="input">/web/md/licence_options.ftl</result>
            <result name="error">/web/md/licence_options.ftl</result>
            <result name="success">/web/md/licence_template.ftl</result>
        </action>

        <!--creative commons license -->
        <action name="ccLicence" class="data.licenceAction" method="ccLicence">
            <result name="input">/web/md/licence_template.ftl</result>
            <result name="error">/web/md/licence_template.ftl</result>
            <result name="success">/web/md/licence_contents.ftl</result>
        </action>

        <!-- show the reporter page -->
        <!-- action name="showImportRep" class="data.importRepAction" method="showImportRep">
            <result name="input">/web/data/import_reporter.ftl</result>
            <result name="error">/web/data/import_reporter.ftl</result>
            <result name="success">/web/data/import_reporter.ftl</result>
        </action-->

        <!-- reporter importing -->
        <!--action name="importRep" class="data.importRepAction" method="importRep">
            <result name="input">/web/data/import_reporter.ftl</result>
            <result name="error">/web/data/import_reporter.ftl</result>
            <result name="success">/web/data/import_reporter_finished.ftl</result>
        </action-->

        <!-- show the probe page -->
        <action name="showImportProbes" class="data.importProbeAction" method="showImportProbes">
            <result name="input">/web/data/import_probes.ftl</result>
            <result name="error">/web/data/import_probes.ftl</result>
            <result name="success">/web/data/import_probes.ftl</result>
        </action>

        <!-- probes importing -->
        <action name="importProbes" class="data.importProbeAction" method="importProbes">
            <result name="input">/web/data/import_probes.ftl</result>
            <result name="error">/web/data/import_probes.ftl</result>
            <result name="success">/web/data/import_probes_finished.ftl</result>
        </action>

        <!-- show the TF Site page -->
        <action name="showImportTFSite" class="data.importTFSiteAction" method="showImportTFSite">
            <result name="input">/web/data/import_tfsite.ftl</result>
            <result name="error">/web/data/import_tfsite.ftl</result>
            <result name="success">/web/data/import_tfsite.ftl</result>
        </action>

        <!-- tf site importing -->
        <action name="importTFSite" class="data.importTFSiteAction" method="importTFSite">
            <result name="input">/web/data/import_tfSite.ftl</result>
            <result name="error">/web/data/import_tfSite.ftl</result>
            <result name="success">/web/data/import_tfSite_finished.ftl</result>
        </action>

        <!-- show the tissue page -->
        <action name="showImportTissue" class="data.importTissueAction" method="showImportTissue">
            <result name="input">/web/data/import_tissue.ftl</result>
            <result name="error">/web/data/import_tissue.ftl</result>
            <result name="success">/web/data/import_tissue.ftl</result>
        </action>

        <!-- tissues importing -->
        <action name="importTissue" class="data.importTissueAction" method="importTissue">
            <result name="input">/web/data/import_tissue.ftl</result>
            <result name="error">/web/data/import_tissue.ftl</result>
            <result name="success">/web/data/import_tissue_finished.ftl</result>
        </action>

        <!-- capture the dataset, ajax version for dataset import -->
        <action name="importDataset" class="data.importDatasetAction" method="importDataset">
            <result name="success" type="json">
                <param name="noCache">true</param>
                <param name="root">responseData</param>
                <param name="contentType">text/html</param>
            </result>
        </action>

        <!-- delete the dataset -->
        <action name="deleteDataset" class="data.deleteDatasetAction" method="deleteDataset">
            <result name="input">/web/data/list_datasets.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/list_datasets.ftl</result>
        </action>

        <!-- list dataset -->
        <action name="listDatasets" class="data.listDatasetsAction" method="listDatasets">
            <result name="input">/web/data/list_datasets.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/list_datasets.ftl</result>
        </action>

        <!-- view dataset -->
        <action name="viewDataset" class="data.datasetAction" method="viewDataset">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/data/dataset_details.ftl</result>
        </action>

    </package>

    <package name="core.perm" extends="core.merc" namespace="/perm">
        <default-interceptor-ref name="authenStack"/>

        <action name="*">
            <result type="freemarker">/web/perm/{1}.ftl</result>
        </action>

        <!-- show change the epxeriment permissions -->
        <action name="showChangeExpPerms" class="perm.permAction" method="showChangeExpPerms">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="success">/web/perm/exp_permissions.ftl</result>
        </action>

        <!-- set experiment permissions -->
        <action name="setExpPerms" class="perm.permAction" method="setExpPerms">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/perm/exp_permissions.ftl</result>
        </action>

        <!-- show apply for perms -->
        <action name="showApplyForPerms" class="perm.permReqAction" method="showApplyForPerms">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/perm/perm_request.ftl</result>
        </action>

        <!-- apply for perms -->
        <action name="applyForPerms" class="perm.permReqAction" method="applyForPerms">
            <result name="input">/web/perm/perm_request.ftl</result>
            <result name="error">/web/perm/perm_request.ftl</result>
            <result name="success">/web/perm/perm_request.ftl</result>
        </action>

        <!-- list all permission requests -->
        <action name="listPermRequests" class="perm.permReqAppAction" method="listPermRequests">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/perm/list_perm_requests.ftl</result>
        </action>

        <!-- approve the permission request -->
        <action name="approvePermReq" class="perm.permReqAppAction" method="approvePermReq">
            <result name="input">/web/perm/list_perm_requests.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/perm/list_perm_requests.ftl</result>
        </action>

        <!-- reject the permission request -->
        <action name="rejectPermReq" class="perm.permReqAppAction" method="rejectPermReq">
            <result name="input">/web/common/list_perm_requests.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/perm/list_perm_requests.ftl</result>
        </action>
    </package>

    <package name="core.pubdata" extends="core.merc" namespace="/pubdata">
        <default-interceptor-ref name="noneAuthStack"/>
        <action name="*">
            <result type="freemarker">/web/pub/{1}.ftl</result>
        </action>
        <!-- view experiments for a logged in user -->
        <action name="viewExperiment" class="pub.viewExpDetailsAction" method="viewExp">
            <result name="input">/web/common/no_loggedin_action_error.ftl</result>
            <result name="error">/web/common/no_loggedin_action_error.ftl</result>
            <result name="success">/web/pub/pub_exp_details.ftl</result>
        </action>
        <!-- list publicly experiments -->
        <action name="listExperiments" class="pub.listExperimentsAction" method="listExperiments">
            <result name="error">/web/common/no_loggedin_action_error.ftl</result>
            <result name="success">/web/pub/list_pub_experiments.ftl</result>
        </action>
        <!-- import dataset -->
        <action name="listDatasets" class="data.listPubDatasetsAction" method="listDatasets">
            <result name="input">/web/pub/list_pub_datasets.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/pub/list_pub_datasets.ftl</result>
        </action>

        <!-- view dataset -->
        <action name="viewDataset" class="data.datasetAction" method="viewPubDataset">
            <result name="input">/web/common/action_error.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/pub/pub_dataset_details.ftl</result>
        </action>

    </package>

    <!-- Search -->
    <package name="core.search" extends="core.merc" namespace="/search">
        <default-interceptor-ref name="noneAuthStack"/>
        <action name="*">
            <result type="freemarker">/web/search/{1}.ftl</result>
        </action>

        <action name="showSearch" class="search.searchAction" method="showSearch">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/search/search.ftl</result>
        </action>

        <action name="searchData" class="search.searchAction" method="searchData">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success">/web/search/search.ftl</result>
        </action>

        <action name="searchGene" class="search.searchAction" method="searchGenes">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success">/web/search/search.ftl</result>
        </action>

        <action name="searchChromosome" class="search.searchAction" method="searchChromosome">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success">/web/search/search.ftl</result>
        </action>

        <action name="searchOntology" class="search.searchAction" method="searchOntology">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success">/web/search/search.ftl</result>
        </action>

        <action name="searchTFSite" class="search.searchAction" method="searchTFSite">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success">/web/search/search.ftl</result>
        </action>

        <action name="searchSubtype" class="search.searchAction" method="searchSubtypes">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success">/web/search/search.ftl</result>
        </action>

        <action name="searchTissueExpression" class="search.searchAction" method="searchTissueExpression">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success">/web/search/search.ftl</result>
        </action>


        <!-- AJAX call to retrieve the subtypes based on which type is selected -->
        <action name="findSubType" class="search.searchAction" method="findSubType">
            <result name="success" type="json">
                <param name="noCache">true</param>
                <param name="root">ifnSubTypeMap</param>
            </result>
        </action>

        <!-- export the dataset -->
        <action name="exportCsvFile" class="search.searchAction" method="exportCsvFile">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="inputName">csvInputStream</param>
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="bufferSize">${bufferSize}</param>
            </result>
        </action>
        <!-- export the geneSummary -->
        <action name="exportCsvFileGene" class="search.searchAction" method="exportCsvFileGene">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="inputName">csvInputStream</param>
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="bufferSize">${bufferSize}</param>
            </result>
        </action>
        <!-- export the OntologyResult -->
        <action name="exportCsvFileOntology" class="search.searchAction" method="exportCsvFileOntology">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="inputName">csvInputStream</param>
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="bufferSize">${bufferSize}</param>
            </result>
        </action>
        <!-- export the TF Anaylsis  -->
        <action name="exportCsvFileTFanalysis" class="search.searchAction" method="exportCsvFileTFanalysis">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="inputName">csvInputStream</param>
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="bufferSize">${bufferSize}</param>
            </result>
        </action>
        <!-- export the Chromosome -->
        <action name="exportCsvFileChromosome" class="search.searchAction" method="exportCsvFileChromosome">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="inputName">csvInputStream</param>
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="bufferSize">${bufferSize}</param>
            </result>
        </action>
        <!-- export the Subtypes -->
        <action name="exportCsvFileTypes" class="search.searchAction" method="exportCsvFileTypes">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="inputName">csvInputStream</param>
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="bufferSize">${bufferSize}</param>
            </result>
        </action>
        <!-- export the TissueExpression -->
        <action name="exportCsvFileTissueExpression" class="search.searchAction" method="exportCsvFileTissueExpression">
            <result name="input">/web/search/search.ftl</result>
            <result name="error">/web/search/search.ftl</result>
            <result name="success" type="stream">
                <param name="contentType">${contentType}</param>
                <param name="inputName">csvInputStream</param>
                <param name="contentDisposition">${contentDisposition}</param>
                <param name="bufferSize">${bufferSize}</param>
            </result>
        </action>
    </package>

    <!-- Search -->
    <package name="core.site" extends="core.merc" namespace="/site">
        <default-interceptor-ref name="noneAuthStack"/>
        <action name="*">
            <result type="freemarker">/web/site/{1}.ftl</result>
        </action>

        <!-- show citation -->
        <action name="showCitation" class="site.citationAction" method="showCitation">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/site/citation.ftl</result>
        </action>

        <!-- show database statistics action -->
        <action name="dbStat" class="site.dbStatAction" method="dbStat">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/site/db_statistics.ftl</result>
        </action>

        <!-- show help -->
        <action name="showHelp" class="site.helpAction" method="showHelp">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/site/help.ftl</result>
        </action>

        <!-- show contact us -->
        <action name="showContactUs" class="site.contactUsAction" method="showContactUs">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/site/contact_us.ftl</result>
        </action>

        <!-- contact us -->
        <action name="contactUs" class="site.contactUsAction" method="contactUs">
            <result name="input">/web/site/contact_us.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/site/contact_us.ftl</result>
        </action>

        <!-- show data submit us -->
        <action name="showSubmitData" class="site.submitDataAction" method="showSubmitData">
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/site/submit_data.ftl</result>
        </action>

        <!-- data submit us -->
        <action name="submitData" class="site.submitDataAction" method="submitData">
            <result name="input">/web/site/submit_data.ftl</result>
            <result name="error">/web/common/action_error.ftl</result>
            <result name="success">/web/site/submit_data.ftl</result>
        </action>

    </package>

    <!-- Security code -->
    <package name="core.securityCode" extends="core.merc" namespace="/security">
        <default-interceptor-ref name="noneAuthStack"/>
        <action name="securityCode" class="security.captchaImgAction" method="securityCode">
            <result name="success" type="stream">
                <param name="contentType">image/jpeg</param>
                <param name="inputName">imageStream</param>
                <param name="allowCaching">false</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>
    </package>
</struts>
